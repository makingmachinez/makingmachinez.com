var zflickjs=function(t){this.id=document.getElementById(t.id),this.contents=document.getElementById(t.contents),this.col=this.contents.getElementsByClassName(t.col),this.lamp=t.lamp?document.getElementById(t.lamp):!1,this.lampActiveClassName=t.lampActiveClassName?t.lampActiveClassName:"cur",this.btnPrev=t.btn?document.getElementById(t.btn.prev):!1,this.btnNext=t.btn?document.getElementById(t.btn.next):!1,this.btnActiveClassName=t.btnActiveClassName?t.btnActiveClassName:"zflickBtnCur",this.move=t.move?t.move:!1,this.loop=t.loop?t.loop:!1,this.autoChange=t.autoChange?t.autoChange:!1,this.autoTimer=t.autoTimer?t.autoTimer:5e3,this.cur=t.cur?t.cur:0,this.initCallback=t.initCallback?t.initCallback:function(){},this.moveCallback=t.moveCallback?t.moveCallback:function(){},this.isArgsWidth=!t.width||t.width<=0?!1:!0,this.idWidth=this.isArgsWidth?t.width:this.id.clientWidth,this.num=0,this.disX=!t.disX||t.disX<=0?5:t.disX,this.disY=!t.disY||t.disY<=0?5:t.disY,this.length=0,this.carray=[],this.warray=[],this.lamps=[],this.cloneLength=t.cloneLength?t.cloneLength:3,this.autoChange&&(this.autoChangeFlag=!0,this.autoTimerCache=[]),this._cNowPos=0,this._cStartPosX=0,this._cStartPosY=0,this._cDistance=0,this._cHoge=0,this._orien=!1,this._btnFlag=t.btn?!0:!1,this._ua=navigator.userAgent,this._initFlag=!0,this._totalWidth=0,this.init()};zflickjs.prototype={init:function(){this.domInit(),this.touchInit(),this._btnFlag&&(this.clickPrevInit(),this.clickNextInit()),this.createLamp(),this.animation(this),this.resetAutoChange(),this.initCallback()},touchInit:function(){var t=!1,i=this;this.contents.addEventListener("touchstart",function(t){i._cStartPosX=t.touches[0].clientX,i._cStartPosY=t.touches[0].clientY,i.killAutoChange()},!1),this.contents.addEventListener("touchmove",function(e){Math.abs(i._cStartPosY-e.touches[0].clientY)>i.disY||t||(i._cDistance=i._cStartPosX-e.touches[0].clientX,i._cHoge=i._cNowPos,i.disX<Math.abs(i._cDistance)&&i._cDistance>0?(e.preventDefault(),e.stopPropagation(),i._cHoge=i._cNowPos-Math.abs(i._cDistance),i._orien=!0,t=!0):i.disX<Math.abs(i._cDistance)&&i._cDistance<0&&(e.preventDefault(),e.stopPropagation(),i._cHoge=i._cNowPos+Math.abs(i._cDistance),i._orien=!1,t=!0),t&&(i.animation(i),i._cDistance=0,i.resetAutoChange()))},!1),this.contents.addEventListener("touchend",function(){t=!1},!1)},animation:function(t){t._orien?(t.cur+=1,t.cur<t.length?t.loop&&t.cur===t.length-1?(t._cNowPos=t.warray[0]+2*t.idWidth,t.noTransAnimate(t),t._cNowPos=t.warray[0]+t.idWidth):t._cNowPos=t.warray[t.cur]:(t.loop&&t.cur===t.length&&(t._cNowPos=t.warray[0]+t.idWidth,t.noTransAnimate(t),t._cNowPos=t.warray[t.cur]),t.cur=t.loop?0:t.length-1,t._cNowPos=t.warray[t.cur])):(t.cur=t._initFlag?t.cur:t.cur-1,t.cur>0?(t._cNowPos=t.warray[t.cur],t.loop&&t.cur===t.length-2&&(t._cNowPos=t.warray[t.length-1],t.noTransAnimate(t),t._cNowPos=t.warray[t.cur])):t.cur<=0&&(t.loop&&t.cur<0?(t.cur=t.length-1,t._cNowPos=t.warray[t.length-1]-t.idWidth,t.noTransAnimate(t)):t.cur=0,t._cNowPos=t.warray[t.cur])),setTimeout(function(){t.transAnimate(t)},1),t.btnCurrentAction(),t.setLamps(t.cur),t._initFlag=!1},transAnimate:function(t){/AppleWebKit/.test(t._ua)?(t.contents.style.webkitTransition="-webkit-transform 0.3s ease-in-out",t.contents.style.webkitTransform="translate3d("+t._cNowPos+"px, 0, 0)"):/Firefox/.test(t._ua)&&(t.contents.style.MozTransition="-moz-transform 0.3s ease-in-out",t.contents.style.MozTransform="translate3d("+t._cNowPos+"px, 0, 0)"),setTimeout(function(){t.moveCallback()},300)},noTransAnimate:function(t){/AppleWebKit/.test(t._ua)?(t.contents.style.webkitTransition="none",t.contents.style.webkitTransform="translate3d("+t._cNowPos+"px, 0, 0)"):/Firefox/.test(t._ua)&&(t.contents.style.MozTransition="none",t.contents.style.MozTransform="translate3d("+t._cNowPos+"px, 0, 0)")},btnCurrentAction:function(){this._btnFlag&&(this.loop?(this.btnNext.className.indexOf(this.btnActiveClassName)<0&&(this.btnNext.className+=" "+this.btnActiveClassName),this.btnPrev.className.indexOf(this.btnActiveClassName)<0&&(this.btnPrev.className+=" "+this.btnActiveClassName)):this.cur<=0?(this.btnPrev.className.indexOf(this.btnActiveClassName)>0&&(this.btnPrev.className=this.btnPrev.className.replace(this.btnActiveClassName,"")),this.btnNext.className.indexOf(this.btnActiveClassName)<0&&(this.btnNext.className+=" "+this.btnActiveClassName)):this.cur===this.length-1?(this.btnPrev.className.indexOf(this.btnActiveClassName)<0&&(this.btnPrev.className+=" "+this.btnActiveClassName),this.btnNext.className.indexOf(this.btnActiveClassName)>0&&(this.btnNext.className=this.btnNext.className.replace(this.btnActiveClassName,""))):(this.btnPrev.className.indexOf(this.btnActiveClassName)<0&&(this.btnPrev.className+=" "+this.btnActiveClassName),this.btnNext.className.indexOf(this.btnActiveClassName)<0&&(this.btnNext.className+=" "+this.btnActiveClassName)))},clickPrevInit:function(){var t=this;this.btnPrev.addEventListener("click",function(){t._orien=!1,t.animation(t),t.killAutoChange(),setTimeout(function(){t.resetAutoChange()},t.autoTimer)},!1)},clickNextInit:function(){var t=this;this.btnNext.addEventListener("click",function(){t._orien=!0,t.animation(t),t.killAutoChange(),setTimeout(function(){t.resetAutoChange()},t.autoTimer)},!1)},resizeInit:function(){var t=this,i=!1;window.addEventListener("resize",function(){i!==!1&&clearTimeout(i),i=setTimeout(function(){t.domInit(),t.animation(t),t.resetAutoChange()},200)},!1)},domInit:function(){this.id.style.width="auto",this.isArgsWidth||(this.idWidth=this.id.clientWidth),this.length=this.col.length,this.id.style.width=this.idWidth+"px",this.loop?(this._totalWidth=this.getContentsWidth(),this.contents.style.width=this._totalWidth*this.cloneLength+"px",this.cloneNode(this.cloneLength),this.loopInitPos()):this.contents.style.width=this.getContentsWidth()+"px"},createLamp:function(){var t=this;if(this.lamp)for(var i=0;i<this.length;i++)this.lamps[i]=document.createElement("div"),function(i){t.lamps[i].addEventListener("click",function(){t.autoChange&&t.killAutoChange(),t.cur=t._orien?i-1:i+1,t.animation(t),t.btnCurrentAction(),t.setLamps(t.cur),t.autoChange&&t.autoChangeFunc()},!1)}(i),this.lamp.appendChild(this.lamps[i])},setLamps:function(t){if(this.lamp){for(var i=0;i<this.length;i++)this.lamps[i].setAttribute("class","");this.lamps[t].setAttribute("class",this.lampActiveClassName)}},getContentsWidth:function(){for(var t=0,i=0,e=this.length;e>i;i++){{this.col[i]}this.carray[i]=this.idWidth,this.warray[i]=-t,t+=this.idWidth}return t},loopInitPos:function(){for(var t=0,i=this.length;i>t;t++)this.warray[t]-=this._totalWidth},cloneNode:function(t){t-=1;for(var i=0;t>i;i++)for(var e=0,s=this.length;s>e;e++)cloneNode=this.col[e].cloneNode(!0),cloneNode.setAttribute("clone","clone"),this.contents.appendChild(cloneNode)},autoChangeFunc:function(){if(!this.autoChangeFlag){var t=this;this.autoTimerCache.push(setInterval(function(){t.autoChangeFlag=!0,t.loop?t._orien=!0:t.cur===t.length-1?(t._orien=!1,t.cur=0):t._orien=!0,t.animation(t)},this.autoTimer))}},resetAutoChange:function(){this.autoChange&&(this.killAutoChange(),this.autoChangeFunc())},killAutoChange:function(){if(this.autoChange){this.autoChangeFlag=!1;for(var t=0,i=this.autoTimerCache.length;i>t;t++)clearInterval(this.autoTimerCache[t]),this.autoTimerCache.splice(t,1)}}};